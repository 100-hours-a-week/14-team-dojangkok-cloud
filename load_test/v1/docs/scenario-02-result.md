# 시나리오 2: 기존 사용자 탐색 - 결과 분석

## 실행 정보

| 항목 | 값 |
|------|-----|
| 실행 일시 | 2026-02-11 04:05:38 KST |
| 대상 서버 | https://<PRODUCTION_URL> |
| 테스트 시간 | 10분 5초 |
| 최대 VU | 800 |
| 토큰 방식 | 단일 토큰 (1개) |
| Rate Limit | **비활성화 상태** |
| 결과 파일 | `results/20260211_040538_scenario-2.json` |

## 요약

**모든 Threshold 통과, 에러율 0%.** 800 VU 동시 접속에서 전체 API가 안정적으로 동작하였습니다.

- 총 요청: **209,432건** (52,358 iterations × 4 API)
- 처리량: **346.3 req/s**
- 에러율: **0.00%**
- 전체 check 성공율: **100%** (261,790/261,790)

## Threshold 결과

| Threshold | 기준 | 실제 | 결과 |
|-----------|------|------|------|
| http_req_duration p(95) | < 3000ms | 476.11ms | **PASS** |
| http_req_duration p(99) | < 5000ms | 650.77ms | **PASS** |
| http_req_failed rate | < 5% | 0.00% | **PASS** |
| GET /members/me p(95) | < 1000ms | 468.92ms | **PASS** |
| GET /lifestyles p(95) | < 1000ms | 455.00ms | **PASS** |
| GET /home-notes p(95) | < 2000ms | 510.17ms | **PASS** |
| GET /home-notes/{id}/checklists p(95) | < 1500ms | 468.45ms | **PASS** |

## 응답 시간

### 전체 종합

| 지표 | 값 |
|------|-----|
| avg | 270.73ms |
| med | 286.23ms |
| p(90) | 421.92ms |
| p(95) | 476.11ms |
| p(99) | 650.77ms |
| max | 54.57s |

### API별 응답 시간

| API | avg | med | p(90) | p(95) | max |
|-----|-----|-----|-------|-------|-----|
| `GET /members/me` | 264.69ms | 280.25ms | 413.75ms | 468.92ms | 20.83s |
| `GET /lifestyles` | 261.18ms | 280.09ms | 408.23ms | 455.00ms | 30.53s |
| `GET /home-notes` | 290.24ms | 302.50ms | 445.61ms | 510.17ms | 38.70s |
| `GET /home-notes/{id}/checklists` | 266.80ms | 282.79ms | 417.40ms | 468.45ms | 54.57s |

### 처리량

| 지표 | 값 |
|------|-----|
| 총 요청 수 | 209,432 |
| 요청 속도 | 346.30 req/s |
| 이터레이션 속도 | 86.57 iter/s |
| 수신 데이터 | 1.0 GB (1.7 MB/s) |
| 송신 데이터 | 15 MB (24 kB/s) |

## 분석

### 1. 안정적인 응답 성능
- 800 VU에서 모든 API의 p(95)이 **510ms 이하**로 매우 양호
- `GET /home-notes`가 가장 느림 (p(95) 510ms) — S3 presigned URL 생성이 포함되어 있기 때문으로 추정
- 나머지 API는 p(95) 455~469ms 수준으로 균일

### 2. max 응답 시간 주의
- max 값이 20초~54초로 높음 (체크리스트 조회 54.57s, 집 노트 목록 38.70s)
- ramp-up 단계에서 서버 웜업 또는 커넥션 풀 확장 중 발생한 것으로 추정
- p(99)이 650ms이므로 99%의 요청은 정상 범위

### 3. 에러율 0%
- 단일 토큰 800 VU에서도 에러 없음
- rate limit 비활성화 상태이므로 429 미발생
- 인증/인가 문제 없음 (GET 요청은 시나리오 1에서 발견된 NPE 영향 없음)

### 4. 처리량
- 346 req/s로 충분한 처리량
- 이터레이션당 평균 7.38초 (sleep 합계 6.8초 + API 응답 시간)

## 시나리오 1과 비교

| 지표 | 시나리오 1 (100 VU) | 시나리오 2 (800 VU) |
|------|-------------------|-------------------|
| 최대 VU | 100 | 800 |
| 에러율 | 50% (NPE 버그) | **0%** |
| p(95) | 20.80ms (에러 포함) | 476.11ms |
| 요청 속도 | 63 req/s | 346 req/s |
| 성공 API | 닉네임만 | 전체 |

> 시나리오 2는 모두 GET 요청이므로 시나리오 1의 라이프스타일 NPE 버그 영향을 받지 않음

## 다음 단계

1. 시나리오 1의 백엔드 버그 수정 후 재실행
2. 다중 토큰 풀로 시나리오 2 재실행 시 DB 캐시 효과가 줄어 응답 시간이 증가할 수 있음
3. 이후 시나리오 (3: 집 노트 CRUD, 4: 파일 업로드 등) 순차 진행
